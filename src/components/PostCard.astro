---
type PostCardProps = {
  href: string;
  title: string;
  description?: string;
  dateText?: string;
  tags?: string[];
  cover?: string | null;
  badge?: string;
  ariaLabel?: string;
  showReadMore?: boolean;
  readMoreLabel?: string;
};

const {
  href,
  title,
  description,
  dateText,
  tags = [],
  cover = null,
  badge,
  ariaLabel,
  showReadMore = false,
  readMoreLabel = '阅读全文 →',
} = Astro.props as PostCardProps;
---

<article class="project-card content-card">
  <div class={`content-card__grid ${cover ? 'has-cover' : ''}`}>
    {
      cover ? (
        <a href={href} class="content-card__thumb-link">
          <img
            class="content-card__thumb"
            src={cover}
            alt={title}
            loading="lazy"
            decoding="async"
            fetchpriority="low"
          />
        </a>
      ) : null
    }

    <div>
      <div class="content-card__title-row">
        <h3 class="content-card__title">
          <a href={href} class="content-card__title-link" aria-label={ariaLabel ?? `查看详情：${title}`}>
            {title}
          </a>
        </h3>
        {badge ? <span class="content-card__badge">{badge}</span> : null}
      </div>
      {description ? <p class="content-card__desc">{description}</p> : null}
      {
        dateText || tags.length ? (
          <span class="content-card__meta">
            {dateText}
            {dateText && tags.length ? ' · ' : null}
            {tags.map((tag, idx) => (
              <>
                <a href={`/tags/${encodeURIComponent(tag)}/`} class="content-card__tag-link">
                  {tag}
                </a>
                {idx < tags.length - 1 ? ' / ' : null}
              </>
            ))}
          </span>
        ) : null
      }
      {showReadMore ? (
        <div class="content-card__actions">
          <a href={href} class="content-card__read-more" aria-label={ariaLabel ?? `查看详情：${title}`}>
            {readMoreLabel}
          </a>
        </div>
      ) : null}
    </div>
  </div>
</article>
