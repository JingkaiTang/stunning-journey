---
type Props = {
  href: string;
  title: string;
  description?: string;
  cover?: string | null;
  kindLabel?: string;
  readMoreLabel?: string;
};

const {
  href,
  title,
  description,
  cover = null,
  kindLabel,
  readMoreLabel = '阅读全文 →',
} = Astro.props as Props;
---

<article class="project-card content-card">
  <div class={`content-card__grid ${cover ? 'has-cover' : ''}`}>
    {cover ? (
      <a href={href} style="display:block;">
        <img class="content-card__thumb" src={cover} alt={title} loading="lazy" decoding="async" fetchpriority="low" />
      </a>
    ) : null}

    <div>
      <div style="display:flex; justify-content: space-between; align-items: baseline; flex-wrap: wrap; gap: 8px;">
        <h3 style="margin:0;">
          <a href={href} style="color: var(--text); text-decoration:none;">{title}</a>
        </h3>
        {kindLabel ? <span style="color: var(--primary); font-size: 0.85rem;">{kindLabel}</span> : null}
      </div>

      {description ? <p style="margin-top: 8px; color: var(--muted);">{description}</p> : null}

      {Astro.slots.has('meta') ? (
        <div style="margin-top: 10px; display:flex; gap: 10px; flex-wrap: wrap;">
          <slot name="meta" />
        </div>
      ) : (
        <div style="margin-top: 10px;">
          <a href={href} aria-label={`阅读全文: ${title}`}>{readMoreLabel}</a>
        </div>
      )}
    </div>
  </div>
</article>
