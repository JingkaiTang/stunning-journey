---
type PostCardProps = {
  href: string;
  title: string;
  description?: string;
  dateText?: string;
  tags?: string[];
  cover?: string | null;
};

const { href, title, description, dateText, tags = [], cover = null } = Astro.props as PostCardProps;
---

<article class="project-card content-card">
  <div class={`content-card__grid ${cover ? 'has-cover' : ''}`}>
    {
      cover ? (
        <a href={href} class="content-card__thumb-link">
          <img
            class="content-card__thumb"
            src={cover}
            alt={title}
            loading="lazy"
            decoding="async"
            fetchpriority="low"
          />
        </a>
      ) : null
    }

    <div>
      <h3 class="content-card__title">
        <a href={href} class="content-card__title-link">{title}</a>
      </h3>
      {description ? <p class="content-card__desc">{description}</p> : null}
      {
        dateText || tags.length ? (
          <span class="content-card__meta">
            {dateText}
            {dateText && tags.length ? ' Â· ' : null}
            {tags.map((tag, idx) => (
              <>
                <a href={`/tags/${encodeURIComponent(tag)}/`} class="content-card__tag-link">
                  {tag}
                </a>
                {idx < tags.length - 1 ? ' / ' : null}
              </>
            ))}
          </span>
        ) : null
      }
    </div>
  </div>
</article>
